<?xml version="1.0" encoding="UTF-8"?>
<?xml-model href="http://docbook.org/xml/5.1/rng/docbook.rng" schematypens="http://relaxng.org/ns/structure/1.0"?>
<?xml-model href="http://docbook.org/xml/5.1/sch/docbook.sch" type="application/xml" schematypens="http://purl.oclc.org/dsdl/schematron"?>
<chapter xmlns="http://docbook.org/ns/docbook"
    xmlns:xlink="http://www.w3.org/1999/xlink" version="5.1">
    <title>Knowledge Editor</title>
    
    <para>The Editor enables users to view, modify, create concepts, modify concepts, classify,
        create versions, export versions, create value sets and modify value sets. This chapter
        provides an overview of the Editor layout and details on autoring content. Users are able to
        see changes made by all users in real-time. </para>
    
    <para>There are two roles that a user can have which changes the functionality available;
        Author, and  Administrator role. The Administrator role has all the functionality as an
        Author with the addition of the ability to Release content. The functionality to Release
        content  is present navagation bar and is described below.</para>
    
    <section><title>Editor Layout</title>
        <para>The Knowledge Editor is divided into 3 sections: the <emphasis role="italic"
                >task</emphasis> pane, the <emphasis role="italic">concept viewer</emphasis>, and
            the navigation bar see figure X below. Each of these functions are described in more
            details in the succeeding sections. Below is a brief description of each area of the Editor:<orderedlist>
                <listitem>
                    <para><emphasis role="bold">Task Pane</emphasis> – The Task Pane consists of
                        several tabs that contain functionality, such as Search, and QA. To this
                        functionality a user selects the appropriate tab. A brief description of
                        each tabs functionility is described: <itemizedlist>
                            <listitem>
                                <para>Taxonomy – The Taxonomy tab is always the default tab when a
                                    user logs into Knowledge.</para>
                            </listitem>
                            <listitem>
                                <para>Sets – </para>
                            </listitem>
                            <listitem>
                                <para>Search</para>
                            </listitem>
                            <listitem>
                                <para>Classifier</para>
                            </listitem>
                            <listitem>
                                <para>QA</para>
                            </listitem>
                            <listitem>
                                <para>Export and Versions</para>
                            </listitem>
                            <listitem>
                                <para>Briefcase</para>
                            </listitem>
                        </itemizedlist></para>
                </listitem>
                <listitem>
                    <para><emphasis role="bold">Concept Viewer</emphasis> – The Concept Viewer
                        displays details of the concept selected in the taxonomy.</para>
                </listitem>
                <listitem>
                    <para><emphasis role="bold">Navigation</emphasis> – The Navigation bar enables
                        fast access to functions e.g. New Concept, and Run Classifier, Return to
                        Knowledge Manager page, Modify global display options</para>
                </listitem>
            </orderedlist>
            <figure>
                <title>Knowledge Editor Layout</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="images/editor-layout.png" width="600px"/>
                    </imageobject>
                    <textobject>
                        <phrase>Knowledge Editor Layout Overview </phrase>
                    </textobject>
                </mediaobject>
            </figure></para>
    </section>
    <section><title>Taxonomy View</title>
           <para>In the Taxonomy view, users can navigate through the concept hiearchy to
                traverse the taxonomy tree located in the left pane. The displays the concepts with
                their parents and their children. You can traverse the tree by selecting the caret
                symbol on the left of the tree to display the selected concept's children.
               <mediaobject>
                    <imageobject>
                        <imagedata fileref="images/taxonomy-view.png" width="600px"/>
                    </imageobject>
                    <textobject>
                        <phrase>Taxonomy View</phrase>
                    </textobject>
                </mediaobject>
           </para>
           <para>The tree-like structure of the Taxonomy View allows you to navigate content
                    from a "top-down" view – user can navigate up or down in the lineage of the
                    content by selecting the <emphasis>caret</emphasis> symbol on the left. The user
                    can also select to display the <emphasis role="italic">inferred</emphasis> or
                        <emphasis role="italic">stated</emphasis> view of the content. The default
                    is to display the <emphasis role="italic">inferred</emphasis> view. The inferred
                    view shows the parent-child lineage that has been inferred after classification
                    and the <emphasis role="italic">stated</emphasis> view shows the parent-child
                    lineage that has been stated by the author when creating the concept. 
           </para>
        <simplesect><title>Status</title>
                  <para>In addition, the user can select to display <emphasis role="italic">active</emphasis> 
                        only concepts or both <emphasis role="italic">active</emphasis> and 
                        <emphasis role="italic">inactive</emphasis> concepts. Inactive concepts will display in 
                      <emphasis>italics</emphasis>. The default is set to display both <emphasis>active</emphasis>
                      concepts only concepts.</para>
        </simplesect>
        <simplesect><title>Display Type</title>
            <para>
                The user has an additional option to display the <emphasis role="italic">Fully Qualified Name</emphasis> (FQN) 
                or the <emphasis role="italic">Normal Name </emphasis>(NAM) of the concept.</para>
        </simplesect>
        <simplesect><title>Refresh the Taxonomy</title>
            <para> The user is also able to force a refresh of the taxonomy by selecting the
                <emphasis>Refresh</emphasis> button.</para>
        </simplesect>
        <simplesect><title>Concept Type – Primitive versus Defined</title>
            <para>In Knowledge concepts are defined as either a <emphasis>defined</emphasis> or
                <emphasis>primitive</emphasis>. <itemizedlist>
                    <listitem>
                        <para><inlinemediaobject>
                            <imageobject>
                                <imagedata format="SVG" fileref="images/green-circle.svg"/>
                            </imageobject>
                            <textobject>
                                <phrase>Defined concept</phrase>
                            </textobject>
                        </inlinemediaobject>Defined – A concept that is
                            <emphasis>defined</emphasis> is represented by a green circle. A
                            concept is considered defined by unique relationships between its relatives (e.g.
                            siblings and parents)</para>
                    </listitem>
                    <listitem>
                        <para>
                            <inlinemediaobject>
                                <imageobject>
                                    <imagedata format="SVG" fileref="images/hexagon.svg"/>
                                </imageobject>
                            </inlinemediaobject> Primative – A concept that is
                            <emphasis>primative</emphasis> is represented by an orange hexagon
                            and signifies that its attributes and parents composing the concept are
                            non-definitive characteristics. </para>
                    </listitem>
                </itemizedlist></para></simplesect>
        <simplesect><title>Linking the Taxonomy View with Search Results</title>
            <para>In the Knowledge Editor you can connect/link the concept selected in the
                Taxonomy to the Concept Viewer Panel. By default the connection
                or linkage is set. This means when you select a concept in the taxonomy the Concept
                Viewer will display the details of that concept. The same is true if select a result
                from a search. You can modify the linkage by toggling the linkage icon in the upper
                lefthand corner of the concept details panel.      
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="images/linkage-icon.png" width="250px" />
                    </imageobject>
                    <textobject><phrase>Linkage Icon</phrase></textobject>
                </mediaobject>
            </para>
        </simplesect></section>
         
        <section><title>Sets</title>
              <para>
                    The <emphasis>Sets</emphasis> tab allows a user to create, and modify Value Sets, and Map Sets.
                    Value Sets are a collection of concepts that is used for a specific
                purpose. e.g. Wound Color Value Set. The Wound Color Value Set would contain the concepts needed to describe
                the color of a wound by a clinician. A Map Set is a mapping between one terminology and another. e.g. SNOMED CT to LOINC mapping. 
                </para> 
                <section><title>Creating a Value Set</title>
                <para>In Knowledge a Value Set can be created which contains a collection of
                    concepts to be used for a particular use determined by the author of the Value
                    Set. For example: The SNOMED CT Value Set – Lateralizable body structure
                    reference set <footnote><para>A Value Set and a SNOMED CT Simple Referece Set are 
                    essentially the same</para></footnote>
                    has implemented Simple Assemblages. A Simple Assemblage is a set
                    of concepts. The set of concepts are defined by the user creating the Simple
                    Assemblage. For example, a simple Assemblage may be created for values used to
                    record the measurement site of a patients heart rate, where the values could be
                    finger, ear lobe, and wrist. There are two ways to create a new reference set,
                    also referred to as a refset in the application: by selecting "Create Refset"
                    under the Authoring navigation menu, and by selecting "New…" under the Sets tab
                    in the Authoring viewing pane. On the Create New Refset page, fill out the
                    information needed and select "Create". Once the refset is created, you will see
                    the ability to add concept members on the left pane. Adding Members to a Refset
                    To add members to a refset, select the "Edit Members" button when viewing the
                    refset details. This will take you into an edit view where you can find concepts
                    by taxonomy, search, or import. Once you have found the concept(s) you want to
                    add, select the plus icon next to it and the item will be added to the table on
                    the left pane. When you are ready to save the members list, select "Compare
                    Sync" to review your changes. If there are any conflicts, the table will display
                    the information to help you decide how to sync the new data into the refset. On
                    the Compare Sync page, the "Save Changes" button means that you wish to save the
                    changes you just made (as displayed under the Draft column in the table). The
                    "Cancel Changes" button means that you wish to discard the changes you made
                    (save the changes under the Published column in the table). Removing Refset
                    Members To remove members from a refset, select the "Edit Members" button when
                    viewing the refset details. This will take you to Edit Mode, where you can
                    remove members from the table by selecting the "X" icon. You must select
                    "Compare Sync" to review and confirm your changes. Refer to the "Adding Members
                    to a Refset" section for additional information on what the "Save Changes" and
                    "Cancel Changes" buttons do. </para></section>
                
                <section><title>Creating a Map Set</title>
                    <para>
                    
                    </para></section>
            </section>
            <section><title>Search</title>
                <para>Search can be performed in the Authoring interface through keywords and Lucene
            query syntax. Knowledge has implemented Lucene, an open-source full-text search library,
            as one of its search engines. To search for a concept, select the “Search” tab on the
            left panel, then fill in the fields as needed. Both Simple Search and Advanced Search
            described in the subsequent sections use Lucene. For more details on the Lucene search
            syntax refer to the <link xlink:href="http://www.lucenetutorial.com"> Lucene
                tutorial</link></para>
            <section>
            <title>Creating a Simple Search</title>
            <para>Terminologies can be searched by keywords under the Search tab in the left pane.
                Type in keywords under the “Search text” field, then select the “Search” button to
                retrieve results.  </para>
            <para>Simple search allows you to search for the keyword that you typed in the search
                box without selecting advanced search or SNOMED CT options. Selecting the search
                button will return all descriptions that matches. Keywords used in simple search are
                identified as Single Terms and Phrases. A Single Term is a single word such as
                "test" or "hello". A Phrase is a group of words surrounded by double quotes such as
                "hello dolly". If a group of words without double quotes are used such as hello
                goodbye, then the results will display results that contain either “hello” or
                “goodbye”. Multiple terms can be combined with Boolean operators to form a more
                complex query. Review Lucene query <link
                    xlink:href="http://www.lucenetutorial.com/lucene-query-syntax.html">keyword
                    matching</link>for more advanced search syntax. </para>
        </section>
            <section><title>Creating an Advanced Search</title>
            <para>Search results can be filtered by using the Advanced Search section under the
                “Search for” field. There are 3 options in the Advanced Search section:</para>
            <orderedlist>
                <listitem>
                    <para>Search In – The system will look for the keywords in either the
                        descriptions, semantics, or identifiers. Descriptions are all information
                        within the concept details; semantics are the properties; and identifiers
                        are alphanumeric IDs such as an SCTID or LOINC code.</para>
                </listitem>
                <listitem>
                    <para>Page size – Select the number of results to display at a time</para>
                </listitem>
                <listitem>
                    <para>Description Type – The system will restrict the search to concepts that
                        are either a fully qualified name, a regular name, a definition, or
                        all.</para>
                </listitem>
            </orderedlist>
                <para><inlinemediaobject>
                    <alt>Figure of the Search tab in Knowledge.</alt>
                    <imageobject>
                        <imagedata fileref="images/search-fields.png"/>
                    </imageobject>
                </inlinemediaobject></para></section>
                <!-- TBD feature 
             <simplesect><title>Saved Searches</title>
                  <para>Search criteria can be saved for later user under the Search tab. To do so,
                      enter the search criteria and select the "Search" button. A results section
                      should appear below the search fields along with options to save the search and
                      to export the results to a CSV file. Select the "Save Search" link in order to
                      name and save the search.</para>
                  <para>Saved searches are retrieved under the "saved searches" section of the search
                      tab. This section is only visible if there are previously saved searches. Select
                      the desired search from a dropdown list and press the "Search" button to pull
                      results.</para></simplesect>-->
        </section>
        <section><title>Classifier</title>
            <para>The Knowledge Editor integrates a high performance Classifier--SnoRocket <link
                xlink:href="https://aehrc.com/snorocket/">https://aehrc.com/snorocket/</link>--which
                supports OWL EL++ and Concrete Domains. The classifier evaluates the stated relationships
                based on <emphasis role="italic">Description Logics </emphasis>upon which the terminology is
                defined and generates the inferred relationships for each concept. The Knowledge Editor
                displays <emphasis role="italic">stated and inferred </emphasis>views of the concept in the
                <emphasis role="italic">concept viewer pane </emphasis>and the Taxonomy displays
                <emphasis role="italic">stated and inferred </emphasis>is-a relationships based on the
                Taxonomy display options.</para>
                <section>
                    <title>Run the Classifier</title>
                    <para>There are 2 places in the Knowledge Editor interface to run the classifier: at the
                        main navigation menu under "Authoring" and in the "Classifier" tab on the left pane. </para>
                    <para>The initial run of the classifier after the start of the system will
                result in all concepts being evaluated. Subsequent classifications will only
                evaluate modified concepts.</para>
                </section>
                <section>
                    <title>View Classifier Results</title>
                    <para>When you open the Classifier tab under the Authoring interface, there is a table of
                        previously run classifications. You may view classifications  results selecting a
                        different classification run from the dropdown "Classifier runs".</para>
                    <para>To view any of these runs, select one and it will display in a concept viewer on the
                        right.</para>
                    <para>Here, a summary of attributes and types are displayed including:
                        <itemizedlist>
                            <listitem>
                                <para>Added "Is a" Types</para>
                                <para>This indication that an is-a relationship has been added to the concept by the classifier.</para>
                            </listitem>
                            <listitem>
                                <para>Inactived "Is a" Types</para>
                            </listitem>
                            <listitem>
                                <para>New Attributes</para>
                            </listitem>
                            <listitem>
                                <para>Inactivated Attributes</para>
                            </listitem>
                            <listitem>
                                <para>Cycles Detected</para>
                            </listitem>
                            <listitem>
                                <para>Equivalents Detected</para>
                            </listitem>
                        </itemizedlist>To review the concepts under each of these summaries, select the row. A
                        table listing the identificed concepts will display below the summary list. You also
                        have the option of adding concepts to your briefcase.</para>
                    <para>If you discover any inaccuracies or equivalencies after a classification, edits must
                        be made directly at the concept level. Refer to "How to Edit a Concept" for information
                        on modifying terminologies.</para></section></section>
       
       <section><title>Briefcase</title>
           <para>The briefcase temporarily holds concepts that can be reviewed and/or edited later. 
               For example, the briefcase can be used: </para>
           <itemizedlist>
               <listitem>
                   <para>
                       To hold equivalent (duplicates) concepts that are flagged as a result of
                       classification. To edit and view the details of the equivalent concept you can add
                       the concept to the briefcase.</para></listitem>
               <listitem>
                   <para>To add a concept from a Value Set to the briefcase</para></listitem></itemizedlist>
           
           
           <para>The briefcase is viewable from the Task Pane of the Knowledge Editor, see screen
                shot below.
                   <inlinemediaobject>
                       <alt>The briefcase options
                           "Select All Items, Remove Selected Items, and Refresh List".</alt>
                       <imageobject>
                           <imagedata fileref="images/briefcase-panel.png"/> </imageobject></inlinemediaobject></para>
           <section><title>Adding a concept to the Briefcase from Classifier Results</title>
               <para>To add a terminology to the briefase from some lists such as classifier page,
                   select the briefcase icon (not all tables have this feature). In the example
                   below, there is an "Add to Briefcase" icon on the 5th column of the members
                   table and an option to "Add all to Briefcase" above the table.</para>
               
           </section>
           
           <section><title>Adding a concept to the Briefcase from a Value Set</title>
               <para><inlinemediaobject>
                   <alt>Members tab under the concept "Lateralizable body structure reference
                       set" with a table that contains the option to add to briefcase in the
                       5th column</alt><imageobject><imagedata fileref="images/add-to-briefcase.png"/></imageobject></inlinemediaobject></para>
           </section>
              <section><title>Removing concepts from the briefcase</title>
                  <para>There are two options to remove concepts from the Briefcase:
                <orderedlist>
                    <listitem>
                        <para>Remove all concepts in the list by selecting the <emphasis>Select All Items</emphasis>button
                        and then selecting the <emphasis>Remove Selected Items></emphasis></para></listitem>
                    <listitem>
                        <para>To remove one or more concepts but <emphasis>not all</emphasis> concepts from the briefbase
                            select the box to the right of the concept to be removed and select the
                            <emphasis>Remove Selected Items</emphasis> button.</para></listitem>
                </orderedlist></para></section>
           <simplesect><title>Refreshing the Briefcase List</title>
               <para>If you do not see the concept(s) just added, try refreshing the list by
                   selecting <emphasis>Refresh List</emphasis>.</para></simplesect></section>

    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude" 
        href="knowledge-concept-viewer.xml" xpointer="concept-viewer"/>
                
    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude" 
        href="knowledge-navigation-bar.xml" xpointer="navigation-bar"/>
    <section><title>Context Menu</title>
        <para>A context menu appears when you right-click on the concept name either on the taxonomy tree or in the 
            title of concept details panel.</para>
        <para>The context menu contains the following options:
            <itemizedlist>
                <listitem>
                    <para>Open concept – opens the concept details information</para>
                </listitem>
                <listitem>
                    <para>Open concept in new concept viewer – opens the concept details information
                        in a third panel.</para>
                </listitem>
                <listitem>
                    <para>Add to briefcase – add the concept to your briefcase, which can be viewed under in
                        the briefcase tab.</para>
                </listitem>
                <listitem>
                    <para>Copy concept, UUID, SCTID, description and SCTID – copies the information described.</para>
                </listitem>
                <listitem>
                    <para>Edit concept – opens the concept in edit mode.</para>
                </listitem>
                <listitem>
                    <para>Edit concept in new viewer – opens the concept in edit mode, in a third concept
                        details panel.</para>
                </listitem>
                <listitem>
                    <para>Clone concept – duplicates the concept information as a new concept.</para>
                </listitem>
                <listitem>
                    <para>Clone concept in new viewer – duplicates the concept information as
                        a new concpet and opens a new concept details panel.</para>
                </listitem>
                <listitem>
                    <para>Create child concept – creates a new child concept with the same information as the selected
                        concept and uses the selected concept as the parent.</para>
                </listitem>
                <listitem>
                    <para>Create child concept in new viewer – creates a new child concept with the same information as the selected
                        concept, uses the selected concept as the parent and opens a third concept viewer panel.</para>
                </listitem>
                <listitem>
                    <para>Inactivate concept – sets the selected concept's state to inactive. If the concept disappears from the taxonomy
                        your display options are set not to display inactive concepts.</para>
                </listitem>
                <listitem>
                    <para>Activate concept – sets the selected concept's state to active. This option is only visible in the context menu
                        if the selected concept is inactive.</para>
                </listitem>
            </itemizedlist>
            <figure xreflabel="linkage">
                <title>Context Menu Options</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="images/cursor-over-concept-details.png" width="750px"/>
                    </imageobject>
                    <textobject>
                        <phrase>Right click options</phrase>
                    </textobject>
                </mediaobject>
            </figure></para>
    </section>
</chapter> 
